/* ========================================= */
/* BASE STYLES & LAYOUT (Dùng cho cả PC & Mobile) */
/* ========================================= */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #2c3e50;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    /* Dùng min-height 100vh để căn giữa trên mọi thiết bị */
    min-height: 100vh;
    margin: 0;
    /* Ngăn chặn thanh cuộn ngang trên điện thoại */
    overflow-x: hidden;
    box-sizing: border-box; 
}

.game-container {
    background-color: #34495e;
    padding: 2rem;
    border-radius: 15px;
    text-align: center;
    /* Đảm bảo nó không quá rộng trên PC */
    max-width: 450px; 
    /* Dùng 90% chiều rộng màn hình cho Responsive */
    width: 90vw; 
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    position: relative; 
    box-sizing: border-box; /* Quan trọng cho Responsive */

    overflow: hidden; 
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* Tinh chỉnh tiêu đề và text để co giãn theo màn hình */
h1 {
    color: #f1c40f;
    margin: 0 0 20px 0;
    text-align: center;
    
    /* Ép tất cả vào 1 hàng duy nhất bằng Flexbox */
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: nowrap; /* Tuyệt đối không cho xuống dòng */
    gap: 10px; /* Khoảng cách giữa icon và chữ */
    
    /* Đảm bảo khối h1 không bao giờ rộng hơn khung cha */
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    padding: 0 5px; /* Tạo một chút khoảng cách an toàn với mép khung */
    
    /* CÔNG THỨC QUAN TRỌNG: Tự động thu nhỏ cỡ chữ theo chiều rộng màn hình */
    /* Chữ sẽ dao động từ 1.1rem (rất nhỏ) đến 2rem (vừa vặn) */
    font-size: clamp(1.1rem, 5.5vw, 2rem); 
}

h1 span {
    flex-shrink: 0; /* Giữ icon không bị bóp méo khi chữ thu nhỏ */
    display: inline-block;
}

/* Tinh chỉnh cho điện thoại cực nhỏ (iPhone SE, v.v.) */
@media (max-width: 320px) {
    h1 {
        gap: 5px;
        font-size: 1rem;
    }
}
h3 { margin-bottom: 10px; color: #e67e22; font-size: 4.5vw; }

/* Input và Select */
.input-group { text-align: left; margin-bottom: 15px; }
.input-group label { display: block; margin-bottom: 5px; font-size: 3.5vw; }
select, input[type="text"], input[type="number"] {
    width: 100%; padding: 10px; border-radius: 5px; border: none; box-sizing: border-box;
    font-size: 4vw; /* Responsive Font Size */
}

/* Các loại nút bấm */
button {
    width: 100%; padding: 12px; border-radius: 5px; border: none;
    cursor: pointer; font-weight: bold; transition: 0.2s;
    margin-top: 5px; color: white;
    font-size: 4.5vw; /* Responsive Font Size */
}
.btn-start { background-color: #27ae60; }
.btn-start:hover { background-color: #2ecc71; }

.btn-submit { background-color: #2980b9; }
.btn-submit:hover { background-color: #3498db; }

.btn-quit { 
    background-color: #c0392b; 
    width: auto; 
    font-size: 3.5vw; /* Responsive Font Size */
    padding: 5px 10px;
}
.btn-quit:hover { background-color: #e74c3c; }

.btn-small {
    background: none; border: 1px solid #7f8c8d; color: #bdc3c7;
    font-size: 3.5vw; 
    padding: 5px; margin-top: 15px;
}
.btn-small:hover { background: #7f8c8d; color: white; }

/* Màn hình hiển thị số */
#number-display {
    font-size: 25vw; /* Phóng to số để dễ nhìn trên điện thoại */
    font-weight: bold;
    height: 120px; 
    line-height: 120px; 
    margin: 20px 0;
    color: #3498db; 
    background: #ecf0f1; 
    border-radius: 10px;
}

/* Header trong game (điểm số và nút thoát) */
/* Header trong game (điểm số và nút thoát) */
.header-game { 
    display: flex; 
    /* Đẩy 2 phần tử về 2 phía xa nhất của khung */
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 20px;
    width: 100%;
    padding: 0 5px;
    box-sizing: border-box;
}

.score-board { 
    font-size: 1.1rem; 
    font-weight: bold;
    color: #f1c40f; /* Làm nổi bật màu điểm số */
}

.btn-quit { 
    background-color: #c0392b; 
    width: auto; 
    font-size: 0.8rem; 
    padding: 8px 15px;
    margin-top: 0; /* Loại bỏ margin top để căn giữa với điểm số */
}

/* Bảng xếp hạng */
.leaderboard-section {
    margin-top: 25px; padding-top: 15px; border-top: 1px solid #7f8c8d;
}
#leaderboard-list {
    list-style: none; padding: 0; margin: 0; text-align: left;
}
#leaderboard-list li {
    padding: 8px; border-bottom: 1px solid #576574;
    display: flex; justify-content: space-between;
    font-size: 4vw;
}
#leaderboard-list li:last-child { border-bottom: none; }
.rank-score { font-weight: bold; color: #f1c40f; }

/* --- Time Bar (Thanh thời gian) --- */
#time-bar-container {
    height: 10px;
    background-color: #ecf0f1;
    border-radius: 5px;
    margin: 10px 0;
    overflow: hidden;
}

#time-bar {
    height: 100%;
    width: 100%;
    background-color: #e74c3c; 
    transition: width linear;
}

/* --- MODAL (Responsive & Blur Effect) --- */
.modal-content {
    background-color: #4a6682; 
    padding: 20px; /* Giảm padding một chút để lấy chỗ cho nút */
    border-radius: 10px;
    text-align: center;
    width: 85%; 
    max-width: 300px; 
    box-shadow: 0 0 25px rgba(241, 196, 15, 0.7); 
    display: flex; /* Sử dụng flexbox để sắp xếp các phần tử bên trong */
    flex-direction: column;
    align-items: center;
    gap: 10px; /* Tạo khoảng cách đều giữa chữ và nút */
}

/* Đảm bảo nút Chơi Lại luôn hiện rõ */
.modal-content button {
    display: block !important; /* Ép buộc hiển thị */
    width: 100%;
    margin-top: 10px;
    background-color: #27ae60;
    color: white;
    padding: 12px;
    font-size: 1.1rem;
    border-radius: 5px;
    cursor: pointer;
}
@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}

#modal-title {
    font-size: 8vw; /* Responsive Font Size */
    max-font-size: 2rem;
    color: #e74c3c;
    margin-top: 0;
}

.final-score-text {
    font-size: 15vw; /* Responsive Font Size */
    max-font-size: 3rem;
    font-weight: bold;
    color: #f1c40f;
    margin: 10px 0 20px 0;
}

.modal-content button {
    margin: 5px;
    width: 90%; 
    display: block;
    padding: 12px;
    font-size: 4.5vw;
}

.hidden { display: none; }

/* ========================================= */
/* MEDIA QUERY CHO MÀN HÌNH MÁY TÍNH (Lớn hơn 450px) */
/* ========================================= */
@media (min-width: 451px) {
    /* Đặt lại kích thước cố định hoặc nhỏ hơn khi ở màn hình lớn */
    .game-container {
        width: 380px; /* Quay lại kích thước cố định cho PC */
    }
    
    h1 { font-size: 2.2rem; }
    h3 { font-size: 1.2rem; }
    
    .input-group label { font-size: 0.9rem; }
    select, input[type="text"], input[type="number"] { font-size: 1rem; }
    
    button { font-size: 1rem; }
    .btn-quit { font-size: 0.8rem; }
    .btn-small { font-size: 0.8rem; }

    #number-display { font-size: 5rem; }
    
    .score-board { font-size: 1.2rem; }
    
    #leaderboard-list li { font-size: 1rem; }

    /* Modal trên PC */
    #modal-title { font-size: 2rem; }
    .final-score-text { font-size: 3rem; }
    .modal-content button { font-size: 1rem; }
}